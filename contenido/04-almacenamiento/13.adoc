= Gesti√≥n de Volumen L√≥gico (LVM): La Columna Vertebral del Almacenamiento Flexible en Linux
Alex Callejas
:doctype: article
:revdate: Oct 16, 2025
:keywords: LVM, Linux, RHCSA, LFCS, LPIC-1, Almacenamiento, SysAdmin
:description: Un post detallado sobre la Gesti√≥n de Volumen L√≥gico (LVM) en Linux, cubriendo PV, VG, LV, creaci√≥n, gesti√≥n y ampliaci√≥n de sistemas de archivos.

image::images/portada_13.png[Gesti√≥n de Volumen L√≥gico (LVM)]

La *Gesti√≥n de Volumen L√≥gico (LVM)* es una herramienta esencial que todo administrador de sistemas Linux debe dominar. Ofrece una flexibilidad de almacenamiento que el particionamiento tradicional de discos no puede igualar, permiti√©ndote redimensionar, mover y tomar instant√°neas de vol√∫menes de forma din√°mica.

Tanto si est√°s preparando el examen *RHCSA* (cuyo enfoque pr√°ctico en Red Hat Enterprise Linux, como se ve en el curso RH134, lo convierte en un tema central) como el *LFCS* o el m√°s generalista *LPIC-1*, el entendimiento y la pr√°ctica de LVM son fundamentales.

== 1. Los Conceptos Clave de LVM: PV, VG y LV üß±

LVM introduce una capa de abstracci√≥n sobre el hardware f√≠sico. Imagina que tu almacenamiento es un juego de LEGO, donde las piezas se combinan en diferentes niveles para crear estructuras flexibles.

[cols="1,2,2,4",options="header"]
|===
|Acr√≥nimo |Concepto |Analog√≠a |Descripci√≥n
|*PV* |*Volumen F√≠sico (Physical Volume)* |Ladrillos individuales de LEGO. |Un disco duro, una partici√≥n de disco o un RAID que ha sido inicializado para que LVM pueda usarlo. Es el componente de almacenamiento base.
|*VG* |*Grupo de Vol√∫menes (Volume Group)* |Un cubo o caja que contiene los ladrillos. |Una colecci√≥n de uno o m√°s *PV*s. Act√∫a como un _pool_ de almacenamiento, combinando el espacio de m√∫ltiples dispositivos f√≠sicos en una √∫nica unidad l√≥gica.
|*LV* |*Volumen L√≥gico (Logical Volume)* |La estructura final construida con los ladrillos. |Una "partici√≥n virtual" que se crea a partir del espacio libre en un *VG*. Es el dispositivo que formateas con un sistema de archivos (como XFS o Ext4) y montas para su uso.
|===

La ventaja clave es que el *LV* ya no est√° atado a la ubicaci√≥n f√≠sica de un disco (PV). Si un LV necesita m√°s espacio, simplemente lo tomas del pool de almacenamiento (VG), que puede ampliarse a√±adiendo m√°s discos f√≠sicos (PVs) sin tener que redimensionar particiones f√≠sicas.

== 2. Creaci√≥n y Gesti√≥n B√°sica de Vol√∫menes L√≥gicos üõ†Ô∏è

El proceso para crear un volumen l√≥gico utilizable sigue una secuencia l√≥gica de tres pasos principales. Usaremos `/dev/sdb` como nuestro disco sin usar y crearemos un volumen de 5 GB para un directorio de datos, asumiendo que el disco ya ha sido particionado con el tipo LVM (`8e` en `fdisk`).

=== Paso 1: Crear los Vol√∫menes F√≠sicos (PV)

Inicializa tu disco o partici√≥n para que LVM pueda reconocerlo.

[source,bash]
----
# Inicializa el dispositivo como un PV
$ sudo pvcreate /dev/sdb1

# Verifica el nuevo PV
$ sudo pvdisplay /dev/sdb1
----

=== Paso 2: Crear el Grupo de Vol√∫menes (VG)

Combina uno o m√°s PVs en un pool de almacenamiento.

[source,bash]
----
# Crea un VG llamado 'datos_vg' usando el PV
$ sudo vgcreate datos_vg /dev/sdb1

# Verifica el nuevo VG
$ sudo vgdisplay datos_vg
----

=== Paso 3: Crear y Formatear el Volumen L√≥gico (LV)

Crea la "partici√≥n virtual" que usar√°s.

[source,bash]
----
# Crea un LV de 5 GB llamado 'almacenamiento_lv' dentro de 'datos_vg'
$ sudo lvcreate -L 5G -n almacenamiento_lv datos_vg

# Verifica el nuevo LV
$ sudo lvdisplay datos_vg/almacenamiento_lv
----

El dispositivo l√≥gico creado estar√° disponible en una ruta similar a `/dev/datos_vg/almacenamiento_lv` o `/dev/mapper/datos_vg-almacenamiento_lv`.

=== Paso 4: Formatear y Montar

Para poder usar el LV, debes formatearlo con un sistema de archivos (XFS o Ext4) y luego montarlo.

[source,bash]
----
# Formatea el LV con XFS (com√∫n en RHCSA)
$ sudo mkfs.xfs /dev/datos_vg/almacenamiento_lv

# Crea un punto de montaje y monta el LV
$ sudo mkdir /datos_empresariales
$ sudo mount /dev/datos_vg/almacenamiento_lv /datos_empresariales

# Para que el montaje sea persistente, a√±ade una entrada a /etc/fstab:
# /dev/mapper/datos_vg-almacenamiento_lv /datos_empresariales xfs defaults 0 0
----

Para que el montaje sea persistente, a√±ade una entrada a /etc/fstab:
`/dev/mapper/datos_vg-almacenamiento_lv /datos_empresariales xfs defaults 0 0`

== 3. La Habilidad Imprescindible: Ampliaci√≥n de Sistemas de Archivos üöÄ

La gran ventaja de LVM es su capacidad de redimensionamiento "en caliente" (mientras est√° montado y en uso, dependiendo del sistema de archivos). Esto es un requisito com√∫n en los ex√°menes de certificaci√≥n.

Para ampliar un LV y el sistema de archivos asociado, el proceso tiene dos fases:

=== Fase 1: Extender el Volumen L√≥gico (LV)

Supongamos que el VG `datos_vg` todav√≠a tiene espacio libre. Puedes usar el comando `lvextend` para a√±adir m√°s espacio al LV `almacenamiento_lv`.

*A√±adir una cantidad espec√≠fica (ej. 3 GB m√°s):*

[source,bash]
----
$ sudo lvextend -L +3G /dev/datos_vg/almacenamiento_lv
----

*Ocupar todo el espacio libre restante en el VG (opci√≥n muy com√∫n en ex√°menes):*

[source,bash]
----
$ sudo lvextend -l +100%FREE /dev/datos_vg/almacenamiento_lv
----

El LV ya tiene el nuevo tama√±o, pero el sistema de archivos (XFS/Ext4) _a√∫n no lo sabe_.

=== Fase 2: Redimensionar el Sistema de Archivos

Este paso hace que el sistema operativo y el sistema de archivos reconozcan el nuevo espacio en el LV. El comando var√≠a seg√∫n el sistema de archivos:

==== A. Para Sistemas de Archivos XFS (Est√°ndar en RHCSA)

XFS es muy simple de redimensionar, ya que solo se puede extender y lo hace en caliente (montado).

[source,bash]
----
$ sudo xfs_growfs /datos_empresariales
----

*Nota:* Debes usar el *punto de montaje* (`/datos_empresariales`) con `xfs_growfs`, no el nombre del dispositivo.

==== B. Para Sistemas de Archivos Ext2/3/4 (Com√∫n en LFCS/LPIC-1)

Para Ext4, puedes usar el nombre del dispositivo. Se puede extender en caliente (montado).

[source,bash]
----
$ sudo resize2fs /dev/datos_vg/almacenamiento_lv
----

=== Comprobaci√≥n Final

Finalmente, verifica que el sistema de archivos ha reconocido el nuevo espacio:

[source,bash]
----
$ df -h /datos_empresariales
----

Ver√°s que el tama√±o del sistema de archivos ha aumentado a 8 GB (el original de 5 GB m√°s los 3 GB que a√±adimos).

¬°Felicidades! Acabas de realizar una tarea fundamental de administraci√≥n de sistemas que es un requisito indispensable en certificaciones como *RHCSA* y *LFCS*. Dominar LVM no solo te ayuda a aprobar, sino que te convierte en un administrador mucho m√°s eficiente y preparado para entornos empresariales.

***

== Invitaci√≥n a la Comunidad üöÄ

Este *post* forma parte de una serie dedicada a la arquitectura y administraci√≥n de sistemas Linux. ¬°Queremos construir el mejor recurso posible *con tu ayuda*!

Te invitamos a:

* *Clonar el Repositorio:* El c√≥digo fuente de todos nuestros art√≠culos est√° disponible en *GitHub*.
* *Contribuir:* Si encuentras alg√∫n error, tienes sugerencias para mejorar la claridad de los conceptos o deseas proponer correcciones t√©cnicas, no dudes en enviar un *Pull Request* (Solicitud de extracci√≥n).
* *Comentar:* ¬øTienes una pregunta o un punto de vista diferente sobre alg√∫n concepto? Abre un *Issue* (Incidencia) en el repositorio para iniciar la discusi√≥n.

Tu colaboraci√≥n es vital para mantener este contenido preciso y actualizado.

*¬°Encuentra el repositorio y participa aqu√≠:* link:https://github.com/rootzilopochtli/introduccion-a-linux[github.com/rootzilopochtli/introduccion-a-linux]