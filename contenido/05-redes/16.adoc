= Introducci√≥n a la Seguridad y el Firewall: El Guardi√°n de tu Sistema Linux üîí
:author: Alex Callejas
:doctype: article
:revdate: Oct 21, 2025
:keywords: firewall, ufw, firewalld, nftables

image::images/portada_16.png[Introducci√≥n a la Seguridad y el Firewall]


Si est√°s prepar√°ndote para certificaciones de Linux como *LPIC-1*, *LFCS* o *RHCSA*, la seguridad de la red es un tema clave. El pilar fundamental de esta seguridad a nivel de sistema es el *firewall* (cortafuegos). En este post, desglosaremos qu√© es, c√≥mo funciona el filtrado de paquetes y te mostraremos configuraciones simples usando las herramientas m√°s comunes: *firewalld* (Red Hat/CentOS) y *ufw* (Debian/Ubuntu).

---

== El Concepto B√°sico de Firewall y Filtrado de Paquetes

Un *firewall* act√∫a como un *portero* o *guardi√°n* de la red. Es un sistema de seguridad que monitorea y controla el tr√°fico de red entrante y saliente bas√°ndose en un conjunto de *reglas de seguridad predefinidas*. Su objetivo principal es establecer una barrera entre una red de confianza (como tu sistema o red interna) y redes no confiables (como Internet).

El funcionamiento interno de la mayor√≠a de los firewalls de nivel de sistema operativo se basa en el *filtrado de paquetes*.

=== Filtrado de Paquetes üì¶

Cada porci√≥n de datos que viaja por una red se divide en peque√±as unidades llamadas *paquetes*. El filtrado de paquetes implica que el firewall inspecciona el *encabezado* de cada paquete de datos (no el contenido) a medida que pasa.

La decisi√≥n de *permitir* (ACCEPT) o *denegar/bloquear* (DROP/REJECT) el paquete se basa en la informaci√≥n del encabezado, que incluye:

* *Direcci√≥n IP de Origen y Destino:* ¬øDe d√≥nde viene y a d√≥nde va el paquete?
* *Puerto de Origen y Destino:* ¬øQu√© aplicaci√≥n o servicio est√° intentando comunicarse (ej. puerto 22 para SSH, 80 para HTTP)?
* *Protocolo:* ¬øQu√© protocolo se est√° utilizando (ej. TCP, UDP, ICMP)?

Al aplicar reglas booleanas sencillas (por ejemplo, _si el destino es el puerto 22, permitir_), el filtrado de paquetes es una defensa r√°pida y eficiente que forma la base de la seguridad de red de tu servidor.

---

== Configuraci√≥n de Firewall en Linux: firewalld vs. ufw

image::images/firewalld_vs_ufw.png[firewalld vs. ufw]

Linux ofrece varias herramientas para configurar el firewall, siendo las m√°s comunes *firewalld* (est√°ndar en distribuciones basadas en Red Hat como RHEL, CentOS y Fedora) y *ufw* (est√°ndar en Debian y Ubuntu). Ambas son interfaces de alto nivel que simplifican la gesti√≥n de las reglas del kernel (iptables o nftables).

=== 1. Configuraci√≥n Simple con firewalld (Red Hat, RHCSA)

*firewalld* utiliza el concepto de *zonas* para definir diferentes niveles de confianza para las conexiones de red.

==== Comandos B√°sicos

. *Verificar el estado:*
+
[source, bash]
----
$ sudo systemctl status firewalld
----

. *Ver las zonas activas y la configuraci√≥n actual (ej. zona `public`):*
+
[source, bash]
----
$ sudo firewall-cmd --get-active-zones
$ sudo firewall-cmd --list-all --zone=public
----

==== Permitiendo Servicios Comunes (SSH y Web)

Para permitir el tr√°fico a un servicio, usamos su nombre predefinido (ej. `ssh`, `http`, `https`). Es crucial agregar las reglas de forma *permanente* y luego *recargar* el firewall.

. *Permitir el servicio SSH (puerto 22) de forma permanente en la zona `public`:*
+
[source, bash]
----
$ sudo firewall-cmd --zone=public --add-service=ssh --permanent
----

. *Permitir el tr√°fico Web (HTTP en puerto 80) de forma permanente:*
+
[source, bash]
----
$ sudo firewall-cmd --zone=public --add-service=http --permanent
----

. *Aplicar los cambios permanentes (recargar):*
+
[source, bash]
----
$ sudo firewall-cmd --reload
----

. *Verificar la configuraci√≥n nuevamente:*
+
[source, bash]
----
$ sudo firewall-cmd --list-services --zone=public
----

=== 2. Configuraci√≥n Simple con ufw (Debian/Ubuntu, LPIC-1/LFCS)

*ufw* (Uncomplicated Firewall) est√° dise√±ado para ser extremadamente f√°cil de usar, ideal para administradores que buscan rapidez y claridad.

==== Comandos B√°sicos

. *Verificar el estado (por defecto est√° inactivo):*
+
[source, bash]
----
$ sudo ufw status
----

. *Establecer las pol√≠ticas predeterminadas (recomendado):*
+
--
* *Denegar todo el tr√°fico entrante* por defecto.
* *Permitir todo el tr√°fico saliente* por defecto.
--
+
[source, bash]
----
$ sudo ufw default deny incoming
$ sudo ufw default allow outgoing
----

==== Habilitando y Permitiendo Servicios

*‚ö†Ô∏è ¬°ADVERTENCIA!* Siempre aseg√∫rate de permitir el servicio SSH antes de habilitar el firewall, especialmente si est√°s conectado remotamente, o podr√≠as bloquearte.

. *Permitir el servicio SSH (puerto 22) usando el nombre del servicio:*
+
[source, bash]
----
$ sudo ufw allow ssh
----

. *Permitir el tr√°fico Web (HTTP en puerto 80) usando el n√∫mero de puerto:*
+
[source, bash]
----
$ sudo ufw allow 80/tcp
----

. *Habilitar el firewall:*
+
[source, bash]
----
$ sudo ufw enable
----
_(Te pedir√° confirmaci√≥n, ya que puede interrumpir conexiones existentes)_

. *Verificar las reglas activas:*
+
[source, bash]
----
$ sudo ufw status verbose
----

Tanto *firewalld* como *ufw* son herramientas esenciales que deber√°s dominar para cualquier certificaci√≥n de administrador de sistemas Linux. ¬°Practica estas configuraciones para asegurar tus sistemas de forma efectiva!

Aqu√≠ tienes un cuadro comparativo que resume las diferencias clave entre `firewalld` y `ufw`, herramientas fundamentales en la administraci√≥n de firewalls en Linux, relevantes para las certificaciones LPIC-1, LFCS y RHCSA.

[cols="2,2,2", options="header"]
|===
| Caracter√≠stica
| firewalld (Firewall Daemon) üî•
| ufw (Uncomplicated Firewall) üõ°Ô∏è

| *Distribuciones T√≠picas*
| *RHEL*, *CentOS*, *Fedora*, OpenSUSE (asociado a RHCSA).
| *Debian*, *Ubuntu*, Linux Mint (asociado a LFCS/LPIC-1).

| *Concepto de Configuraci√≥n*
| Basado en *Zonas* (ej. `public`, `home`, `internal`). Las interfaces de red se asignan a zonas, y cada zona tiene un conjunto de reglas.
| Basado en *Reglas de Puertos/Servicios*. Configuraci√≥n secuencial simple (permitir/denegar).

| *Arquitectura*
| Es un demonio de gesti√≥n de firewall *din√°mico*. Permite cambios de reglas sin reiniciar el servicio.
| Interfaz sencilla de l√≠nea de comandos para *iptables* (y nftables). M√°s directo, pero requiere habilitaci√≥n/deshabilitaci√≥n para grandes cambios.

| *Permanencia de las Reglas*
| Las reglas se distinguen entre *"runtime"* (solo activas hasta el siguiente reinicio/recarga) y *"permanent"* (persisten despu√©s del reinicio).
| Las reglas son *permanentes por defecto* una vez que se a√±aden (si el firewall est√° activo) y persisten tras el reinicio.

| *Comando Principal*
| `firewall-cmd`
| `ufw`

| *Ejemplo: Permitir SSH*
| `sudo firewall-cmd --zone=public --add-service=ssh --permanent`
| `sudo ufw allow ssh` o `sudo ufw allow 22/tcp`

| *Gesti√≥n de Interfaces/Or√≠genes*
| Utiliza *Zonas* para aplicar reglas a interfaces espec√≠ficas o rangos de red.
| Utiliza cl√°usulas *`in`*, *`out`*, *`from`*, e *`on`* (interfaz).

| *Nivel de Complejidad*
| Mayor curva de aprendizaje debido al modelo de zonas, pero m√°s *flexible y potente* para entornos de servidor complejos.
| Dise√±ado para ser *"sin complicaciones"* (uncomplicated). Ideal para firewalls b√°sicos y r√°pidos.
|===


// Enlace de la publicaci√≥n original (para versiones fuera de GitHub)
// link:https://www.rootzilopochtli.com/introduccion-a-la-seguridad-y-el-firewall [Publicaci√≥n Original del Blog]

***

== Invitaci√≥n a la Comunidad üöÄ

Este *post* forma parte de una serie dedicada a la arquitectura y administraci√≥n de sistemas Linux. ¬°Queremos construir el mejor recurso posible *con tu ayuda*!

Te invitamos a:

* *Clonar el Repositorio:* El c√≥digo fuente de todos nuestros art√≠culos est√° disponible en *GitHub*.
* *Contribuir:* Si encuentras alg√∫n error, tienes sugerencias para mejorar la claridad de los conceptos o deseas proponer correcciones t√©cnicas, no dudes en enviar un *Pull Request* (Solicitud de extracci√≥n).
* *Comentar:* ¬øTienes una pregunta o un punto de vista diferente sobre alg√∫n concepto? Abre un *Issue* (Incidencia) en el repositorio para iniciar la discusi√≥n.

Tu colaboraci√≥n es vital para mantener este contenido preciso y actualizado.

*¬°Encuentra el repositorio y participa aqu√≠:* link:https://github.com/rootzilopochtli/introduccion-a-linux[github.com/rootzilopochtli/introduccion-a-linux]